(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[107],{67333:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dv/accept-configuration",function(){return r(73482)}])},79986:function(e,n,r){"use strict";r.d(n,{i:function(){return u}});var t=r(85893),s=r(74905),o=r(79124),i=r(7561),a=r(87536);function c(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function l(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),t.forEach((function(n){c(e,n,r[n])}))}return e}function d(e,n){if(null==e)return{};var r,t,s=function(e,n){if(null==e)return{};var r,t,s={},o=Object.keys(e);for(t=0;t<o.length;t++)r=o[t],n.indexOf(r)>=0||(s[r]=e[r]);return s}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(t=0;t<o.length;t++)r=o[t],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}var u=function(e){var n,r=e.control,c=e.name,u=e.onChangeValue,h=d(e,["control","name","onChangeValue"]),x=(0,a.bc)({control:r,name:c,rules:{required:!0,pattern:{value:/^enr:-\S+$/,message:"ENR must start with enr:- and should not contain whitespace characters"},validate:function(e){return g(e.toString())}}}),f=x.field,v=x.formState.errors,g=function(e){try{return i.ENR.decodeTxt(e),!0}catch(n){return"Invalid or malformed ENR"}};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.Kx,l({css:{minHeight:"$7xl"},placeholder:"enr:-",onChange:function(e){return n=e.target.value,f.onChange(n),void(u&&u(n));var n},value:f.value},h)),(null===(n=v.enr)||void 0===n?void 0:n.message)&&(0,t.jsx)(s.xv,{variant:"metadata",color:"test",children:v.enr.message})]})}},73482:function(e,n,r){"use strict";r.r(n);var t=r(34051),s=r.n(t),o=r(85893),i=r(79124),a=r(74905),c=r(72151),l=r(43080),d=r(79225),u=r(87536),h=r(72534),x=r(48847),f=r(2983),v=r(11163),g=r(8100),p=r(67294),m=r(79986),j=r(19526);function b(e,n,r,t,s,o,i){try{var a=e[o](i),c=a.value}catch(l){return void r(l)}a.done?n(c):Promise.resolve(c).then(t,s)}a.xu,a.KZ,a.xu,a.zM;var y=function(){var e=(0,h.kR)(),n=e.account,r=e.provider,t=e.chainId,y=(0,u.cI)({mode:"onChange"}),w=y.control,C=y.handleSubmit,$=y.formState,k=$.isDirty,O=$.isValid,N=(0,v.useRouter)(),S=(0,p.useState)(!1),_=S[0],E=S[1],I=(0,p.useState)(!1),R=I[0],T=I[1],W=(0,p.useState)(),P=W[0],z=W[1],A=(0,p.useState)(""),F=A[0],D=A[1],G=(0,d.o)((function(e){return e.clusterDefinitionData})),M=(0,d.o)((function(e){return e.updateJoinFirstStep})),Z=(0,d.o)((function(e){return e.completeOperatorStep})),H=(0,d.o)((function(e){return e.enableOperatorStep}));(null===G||void 0===G?void 0:G.config_hash)&&M("/dv#".concat(null===G||void 0===G?void 0:G.config_hash));var K=function(){var e,o=(e=s().mark((function e(o){var i,a,c,d,u,h,v,g;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,D(""),T(!0),i={operator_config_hash:null===G||void 0===G?void 0:G.config_hash},e.next=6,(0,x.AM)(r,t,n,i);case 6:return a=e.sent,c={enr:o.enr},e.next=10,(0,x.Ol)(r,t,n,c);case 10:return d=e.sent,u={address:n,enr:o.enr,enr_signature:d,fork_version:l.se},e.next=14,(0,f.R)({token:a,data:u,configHash:null===G||void 0===G?void 0:G.config_hash});case 14:h=e.sent.data,z(h),T(!1),e.next=25;break;case 19:e.prev=19,e.t0=e.catch(0),console.log(e.t0),D(null===(v=e.t0.response)||void 0===v||null===(g=v.data)||void 0===g?void 0:g.message),T(!1);case 25:case"end":return e.stop()}}),e,null,[[0,19]])})),function(){var n=this,r=arguments;return new Promise((function(t,s){var o=e.apply(n,r);function i(e){b(o,t,s,i,a,"next",e)}function a(e){b(o,t,s,i,a,"throw",e)}i(void 0)}))});return function(e){return o.apply(this,arguments)}}(),L=(0,g.ZP)("/dv/".concat(null===G||void 0===G?void 0:G.config_hash),f.FU,{refreshInterval:function(e){return(null===e||void 0===e?void 0:e.definition_hash)?0:1e3}}).data;if(!L)return(0,o.jsx)(a.xv,{children:"Loading..."});var Q=L.operators.length,X=(L.operators.map((function(e){return{operator:e.address,accepted:(0,o.jsx)(c.vi,{operator:e})}})),null===L||void 0===L?void 0:L.operators.reduce((function(e,n){return e&&(0,x.FX)(n)}),!0)),Y=function(){return(0,o.jsx)(a.W2,{className:"cluster-details",alignItems:"start",children:(0,o.jsxs)(i.kC,{direction:"column",css:{gap:"$2xl"},children:[(0,o.jsx)(a.xv,{variant:"h4",children:"Cluster Details"}),(0,o.jsxs)(i.kC,{direction:"column",className:"cluster-name-section",css:{gap:"$sm"},children:[(0,o.jsx)(a.xv,{color:"body",variant:"body",children:"These are the group details that you need to review and accept to continue.\xa0"}),(0,o.jsx)(a.xv,{color:"body",variant:"body",children:"The status of each participant will update once they have signed and confirmed the configuration."}),(0,o.jsxs)(i.kC,{css:{gap:"$2xl"},children:[(0,o.jsx)(c.Mz,{heading:"Cluster Name",subHeading:L.name}),(0,o.jsx)(c.Mz,{heading:"Group Size",subHeading:Q.toString(),tooltipContent:"Group Size: The number of operators in the cluster. The minimum is three, for now the maximum is capped at 15."}),(0,o.jsx)(c.Mz,{heading:"Threshold",subHeading:"".concat(L.threshold,"/").concat(Q),tooltipContent:"Threshold: The number of nodes that need to be functioning for the validator to stay active."})]}),(0,o.jsx)(j.SS,{operators:null===L||void 0===L?void 0:L.operators})]})]})})},q=function(){return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(i.kC,{css:{backgroundColor:"$bg03",borderRadius:"$1",gap:"$xs",p:"$sm",boxSizing:"border-box",width:"$full"},children:[(0,o.jsx)(a.xu,{children:(0,o.jsx)(a.nQ,{})}),(0,o.jsx)(a.xv,{variant:"body",css:{fontWeight:"$bold",color:"$light"},children:"Confirmation signature successfully submitted"})]}),(0,o.jsxs)(i.kC,{css:{backgroundColor:"$bg03",borderRadius:"$1",gap:"$xs",p:"$sm",boxSizing:"border-box",width:"$full"},children:[(0,o.jsx)(a.xu,{children:X?(0,o.jsx)(a.nQ,{}):(0,o.jsx)(a.ZG,{})}),(0,o.jsx)(i.kC,{css:{fd:"column",gap:"$xs"},children:(0,o.jsx)(a.xv,{variant:"body",css:{fontWeight:"$bold",color:"$light"},children:"Awaiting all group signatures to proceed to Distributed Key Generation."})})]})]})},V=function(){return(0,o.jsxs)(i.kC,{direction:"column",css:{gap:"$2xl"},children:[(0,o.jsx)(a.xv,{variant:"h3",children:"Accept Configuration"}),(0,o.jsx)(c.qN,{}),(0,o.jsx)(a.W2,{className:"success-section",alignItems:"start",css:{gap:"$xs"},children:(0,o.jsxs)(i.kC,{css:{backgroundColor:"$bg03",borderRadius:"$1",gap:"$xs",p:"$sm",boxSizing:"border-box",width:"$full"},children:[(0,o.jsx)(a.xu,{children:(0,o.jsx)(a.nQ,{})}),(0,o.jsx)(a.xv,{variant:"body",css:{fontWeight:"$bold",color:"$light"},children:"All operators can now proceed to the Distributed Key Generation phase"})]})}),(0,o.jsx)(a.W2,{children:(0,o.jsx)(a.zx,{fullWidth:!0,onClick:function(){return function(){Z("dv-accept-config");var e=H("dv-dkg");N.push(e.href)}()},children:"Continue"})})]})};if(X)return(0,o.jsx)(V,{});var J=L.operators.find((function(e){var r;return(null===e||void 0===e||null===(r=e.address)||void 0===r?void 0:r.toLowerCase())===(null===n||void 0===n?void 0:n.toLowerCase())}));return(0,x.FX)(J)&&!P&&z(J),(0,o.jsxs)(i.kC,{direction:"column",css:{gap:"$2xl"},children:[(0,o.jsx)(a.xv,{variant:"h3",children:P?"Waiting for all participants to accept configuration":"Accept Configuration"}),(0,o.jsx)(i.l0,{onSubmit:C(K),children:(0,o.jsxs)(i.kC,{direction:"column",css:{gap:"$2xl"},children:[(0,o.jsx)(Y,{}),P?(0,o.jsx)(a.W2,{className:"waiting-section",alignItems:"start",css:{gap:"$lg"},children:(0,o.jsx)(q,{})}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(a.W2,{className:"enr-section",alignItems:"start",css:{gap:"$lg"},children:[(0,o.jsxs)(i.kC,{direction:"column",css:{gap:"$sm"},children:[(0,o.jsxs)(i.kC,{css:{alignItems:"center",gap:"$xxxs"},children:[(0,o.jsx)(a.xv,{variant:"subline",color:"body",css:{textTransform:"uppercase"},children:"Your Charon client ENR"}),(0,o.jsx)(a.KZ,{content:'An ENR is an "Ethereum Node Record", and is used to identify your client to the other clients in the cluster."',children:(0,o.jsx)(a.xu,{css:{display:"flex"},children:(0,o.jsx)(a.by,{})})})]}),(0,o.jsx)(m.i,{control:w,name:"enr"})]}),(0,o.jsxs)(a.rU,{href:"https://docs.obol.tech/docs/next/int/faq/errors#enrs-keys",target:"_blank",children:["More on Ethereum Node Records ",(0,o.jsx)(a.ZJ,{})]})]}),L.withdrawal_address?(0,o.jsx)(a.W2,{className:"withdrawal-section",css:{gap:"$sm"},alignItems:"start",children:(0,o.jsxs)(i.kC,{direction:"column",className:"single-address-section",css:{gap:"$sm"},children:[(0,o.jsx)(a.xv,{variant:"h4",children:"Single Address"}),(0,o.jsx)(a.xv,{color:"body",variant:"body",children:"A single withdrawal's address will get the 100%."}),(0,o.jsx)(a.nv,{color:"obolGreen",readOnly:!0,value:L.withdrawal_address})]})}):(0,o.jsxs)(a.W2,{className:"withdrawal-section",css:{gap:"$xl"},alignItems:"start",children:[(0,o.jsx)(a.xv,{variant:"h4",children:"Withdrawal Address"}),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(a.xv,{color:"body",variant:"body",children:"Enter each recipient\u2019s address and their share. Ownership must\n                  add to 100%."}),(0,o.jsx)(a.xv,{color:"body",variant:"body",children:"By default, the Operator addresses are pre-filled,\n                  and an optional 1% of rewards are allocated to be used by Obol\n                  for Public Goods."}),(0,o.jsx)(a.Cl,{columns:l.Ae,rows:[]})]})]}),(0,o.jsx)(a.W2,{className:"fee-recipient-section",css:{gap:"$sm"},alignItems:"start",children:(0,o.jsxs)(i.kC,{direction:"column",className:"fee-recipient-address-section",css:{gap:"$sm"},children:[(0,o.jsx)(a.xv,{variant:"h4",children:"Fee Recipient"}),(0,o.jsx)(a.xv,{color:"body",variant:"body",children:"Address to receive transaction fees from block proposals."}),(0,o.jsx)(a.nv,{color:"obolGreen",readOnly:!0,value:L.fee_recipient_address})]})}),(0,o.jsxs)(a.W2,{className:"confirm-details-section",alignItems:"start",css:{gap:"$lg"},children:[(0,o.jsx)(a.xv,{variant:"h4",children:"Confirm Details"}),(0,o.jsxs)(i.kC,{css:{gap:"$xs",width:"$full"},children:[(0,o.jsx)(a.xu,{children:(0,o.jsx)(a.XZ,{checked:_,onCheckedChange:function(){return E(!_)}})}),(0,o.jsx)(a.xv,{variant:"body",children:"You will be prompted to sign a message with your wallet. This signature is attesting to the fact that:"})]}),(0,o.jsx)(a.sQ,{heading:"You have confirmed the withdrawal address for the validators to be created is correct. If this address is a contract, you have confirmed the contract implementation is correct. If this address is an externally-owned account, you have confirmed that the EOA custody is secure. This address is where the principal and rewards for all created validators will be credited to and the address cannot be modified."}),(0,o.jsx)(a.sQ,{heading:"You have submitted your charon node's Ethereum Node Record (ENR) correctly. This signature is the authorisation of this charon client to act on your behalf."}),F&&(0,o.jsxs)(a.mh,{css:{backgroundColor:"$test"},children:[(0,o.jsx)(a.xu,{children:(0,o.jsx)(a.zM,{size:"lg",color:"body"})}),(0,o.jsx)(i.kC,{direction:"column",css:{gap:"$sm"},children:(0,o.jsx)(i.kC,{direction:"column",css:{gap:"$xs"},children:(0,o.jsx)(a.xv,{color:"textLight",children:F})})})]}),(0,o.jsxs)(i.kC,{direction:"column",children:[(0,o.jsx)(a.zx,{color:"primary",type:"submit",css:{"& div":{m:0}},disabled:!k||!O||!n||!_,children:(0,o.jsxs)(o.Fragment,{children:[R&&(0,o.jsx)(a.yC,{}),"Confirm and Sign"]})}),!n&&(0,o.jsx)(a.xv,{variant:"metadata",color:"test",children:"Please connect your wallet"})]})]})]})]})})]})};n.default=y,y.layout="OperatorProgressTrackerLayout"},61714:function(){},11971:function(){},72062:function(){},20988:function(){},46601:function(){},89214:function(){},39370:function(){},62678:function(){},25819:function(){},24112:function(){}},function(e){e.O(0,[880,536,380,805,774,888,179],(function(){return n=67333,e(e.s=n);var n}));var n=e.O();_N_E=n}]);