(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[489],{17740:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/confirm-configuration",function(){return r(88745)}])},88745:function(e,n,r){"use strict";r.r(n);var t=r(34051),s=r.n(t),a=r(85893),o=r(79124),i=r(74905),c=r(72151),l=r(43080),u=r(79225),d=r(87536),h=r(72534),f=r(48847),p=r(2983),x=r(11163),m=r(67294);function v(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}function g(e,n,r,t,s,a,o){try{var i=e[a](o),c=i.value}catch(l){return void r(l)}i.done?n(c):Promise.resolve(c).then(t,s)}function j(e){return function(){var n=this,r=arguments;return new Promise((function(t,s){var a=e.apply(n,r);function o(e){g(a,t,s,o,i,"next",e)}function i(e){g(a,t,s,o,i,"throw",e)}o(void 0)}))}}function y(e){return function(e){if(Array.isArray(e))return v(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"===typeof e)return v(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return v(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var b=function(){var e=(0,h.kR)(),n=e.account,r=e.provider,t=e.chainId,v=(0,d.cI)({mode:"onChange"}).handleSubmit,g=(0,x.useRouter)(),b=(0,m.useState)(),w=b[0],k=b[1],C=(0,m.useState)(),S=C[0],_=C[1],A=(0,m.useState)(!1),N=A[0],E=A[1],$=(0,m.useState)(),O=$[0],T=$[1],I=(0,m.useState)(),z=I[0],R=I[1],F=(0,m.useState)(),H=F[0],M=F[1],W=(0,m.useState)(),P=W[0],G=W[1],L=(0,u.o)((function(e){return e.clusterDefinition})),K=(0,u.o)((function(e){return e.completeLeaderStep})),V=(0,u.o)((function(e){return e.enableLeaderStep})),q=((0,u.o)((function(e){return e.getStepByRoute(g.pathname)})),function(e){console.log(e),k(null),_(null),T(null),R(null),M(null),E(!1)});if((0,m.useEffect)((function(){if(w){var e=function(){var e=j(s().mark((function e(){var a,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={creator_config_hash:w.config_hash},e.next=3,(0,f.L6)(r,t,n,a);case 3:o=e.sent,G(o);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();if(e(),!L.nonOperatorFlag){var a=function(){var e=j(s().mark((function e(){var a,o,i,c;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={operator_config_hash:w.config_hash},e.next=4,(0,f.AM)(r,t,n,a);case 4:return o=e.sent,M(o),i={enr:L.enr},e.next=9,(0,f.Ol)(r,t,n,i);case 9:c=e.sent,R(c),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),q(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}();a().catch(q)}}}),[w]),(0,m.useEffect)((function(){if(P&&w){var e=function(){var e=j(s().mark((function e(){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,p.c0)({token:P,data:w});case 2:if((n=e.sent).data.config_hash){e.next=5;break}throw"no config hash returned";case 5:T(n.data.config_hash);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e().catch(q)}}),[P,w]),(0,m.useEffect)((function(){if(!L.nonOperatorFlag&&z&&H&&O){var e=function(){var e=j(s().mark((function e(){var r,t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={address:n,enr:L.enr,enr_signature:z,fork_version:l.se},e.next=3,(0,p.R)({token:H,data:r,configHash:O});case 3:t=e.sent.data,_(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e().catch(q)}}),[z,O]),(0,m.useEffect)((function(){if(!L.nonOperatorFlag&&S&&O||L.nonOperatorFlag&&O){K("confirm-configuration");var e=V("invite-group");E(!1),g.push({pathname:e.href,query:{configHash:O}})}}),[S,O]),!L)return(0,a.jsx)(i.xv,{children:"No cluster data ..."});var B=function(){var e=j(s().mark((function e(){var r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=(0,f.KH)(L,n),k(r),E(!0);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=(0,f.zT)(L.clusterSize);return(0,a.jsxs)(o.kC,{direction:"column",css:{gap:"$2xl"},children:[(0,a.jsx)(i.xv,{variant:"h3",children:"Confirm Configuration"}),(0,a.jsx)(o.l0,{onSubmit:v(B),children:(0,a.jsxs)(o.kC,{direction:"column",css:{gap:"$2xl"},children:[(0,a.jsx)(i.W2,{className:"cluster-details",alignItems:"start",children:(0,a.jsxs)(o.kC,{direction:"column",css:{gap:"$2xl"},children:[(0,a.jsx)(i.xv,{variant:"h4",children:"Cluster Details"}),(0,a.jsxs)(o.kC,{direction:"column",className:"cluster-name-section",css:{gap:"$sm"},children:[(0,a.jsx)(i.xv,{color:"body",variant:"body",children:"These are the group details that you need to review and accept to continue.\xa0"}),(0,a.jsx)(i.xv,{color:"body",variant:"body",children:"The status of each participant will update once they have signed and confirmed the configuration."}),(0,a.jsxs)(o.kC,{css:{gap:"$2xl"},children:[(0,a.jsx)(c.Mz,{heading:"Cluster Name",subHeading:L.name}),(0,a.jsx)(c.Mz,{heading:"Group Size",subHeading:L.clusterSize.toString(),tooltipContent:"Group Size: The number of operators in the cluster. The minimum is three, for now the maximum is capped at 15."}),(0,a.jsx)(c.Mz,{heading:"Threshold",subHeading:"".concat(D,"/").concat(L.clusterSize),tooltipContent:"Threshold: The number of nodes that need to be functioning for the validator to stay active."})]}),(0,a.jsx)(o.VL,{operators:L.nonOperatorFlag?y(L.operators):[{address:n}].concat(y(L.operators)),currentAccount:n})]})]})}),(0,a.jsxs)(i.W2,{className:"validators-section",alignItems:"start",children:[(0,a.jsx)(o.kC,{direction:"column",css:{gap:"$xxxs"},children:(0,a.jsx)(i.xv,{variant:"h4",children:"Validators"})}),(0,a.jsxs)(o.kC,{direction:{"@sm":"column"},css:{gap:"$xl",width:"auto"},children:[(0,a.jsx)(c.Mz,{heading:"Validators",subHeading:L.validatorsSize.toString()}),(0,a.jsxs)(o.kC,{direction:"column",css:{gap:"$xs"},children:[(0,a.jsx)(i.xv,{css:{textTransform:"uppercase"},variant:"subline",color:"body",children:"Cost"}),(0,a.jsxs)(o.kC,{css:{gap:"$xxs",height:"100%",alignItems:"center"},children:[(0,a.jsx)(i.Ee,{src:"/assets/eth-icon.svg",alt:"eth",width:24,height:24}),(0,a.jsxs)(i.xv,{css:{textTransform:"uppercase"},variant:"h5",children:[L.validatorsEthAmount," Eth"]})]})]})]})]}),!L.nonOperatorFlag&&(0,a.jsxs)(i.W2,{className:"enr-section",alignItems:"start",css:{gap:"$lg"},children:[(0,a.jsxs)(o.kC,{direction:"column",css:{gap:"$sm"},children:[(0,a.jsxs)(o.kC,{css:{alignItems:"center",gap:"$xxxs"},children:[(0,a.jsx)(i.xv,{variant:"subline",color:"body",css:{textTransform:"uppercase"},children:"Your Charon client ENR"}),(0,a.jsx)(i.KZ,{content:'An ENR is an "Ethereum Node Record", and is used to identify your client to the other clients in the cluster."',children:(0,a.jsx)(i.xu,{css:{display:"flex"},children:(0,a.jsx)(i.by,{})})})]}),(0,a.jsx)(o.Kx,{placeholder:"Your enr",value:L.enr,readOnly:!0})]}),(0,a.jsxs)(i.rU,{href:"https://docs.obol.tech/docs/next/int/faq/errors#enrs-keys",target:"_blank",children:["More on Ethereum Node Records ",(0,a.jsx)(i.ZJ,{})]})]}),L.singleAddress?(0,a.jsx)(i.W2,{className:"withdrawal-section",css:{gap:"$sm"},alignItems:"start",children:(0,a.jsxs)(o.kC,{direction:"column",className:"single-address-section",css:{gap:"$sm"},children:[(0,a.jsx)(i.xv,{variant:"h4",children:"Single Address"}),(0,a.jsx)(i.xv,{color:"body",variant:"body",children:"A single withdrawal\u2019s address will get the 100%."}),(0,a.jsx)(i.nv,{color:"obolGreen",readOnly:!0,value:L.singleAddress})]})}):(0,a.jsxs)(i.W2,{className:"withdrawal-section",css:{gap:"$xl"},alignItems:"start",children:[(0,a.jsx)(i.xv,{variant:"h4",children:"Withdrawal Addresses"}),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.xv,{color:"body",variant:"body",children:"Enter each recipient\u2019s address and their share. Ownership must\n                    add to 100%."}),(0,a.jsx)(i.xv,{color:"body",variant:"body",children:" By default, the Operator addresses are pre-filled,\n                    and an optional 1% of rewards are allocated to be used by Obol\n                    for Public Goods."}),(0,a.jsx)(i.Cl,{columns:l.Ae,rows:[]})]})]}),(0,a.jsx)(i.W2,{className:"fee-recipient-section",css:{gap:"$sm"},alignItems:"start",children:(0,a.jsxs)(o.kC,{direction:"column",className:"fee-recipient-address-section",css:{gap:"$sm"},children:[(0,a.jsx)(i.xv,{variant:"h4",children:"Fee Recipient Address"}),(0,a.jsx)(i.xv,{color:"body",variant:"body",children:"Address to receive transaction fees from block proposals."}),(0,a.jsx)(i.nv,{color:"obolGreen",readOnly:!0,value:L.feeRecipientAddress})]})}),(0,a.jsx)(o.kC,{direction:"column",children:(0,a.jsx)(i.zx,{color:"primary",type:"submit",css:{"& div":{m:0}},children:(0,a.jsxs)(a.Fragment,{children:[N&&(0,a.jsx)(i.yC,{}),"Confirm and Sign"]})})})]})})]})};n.default=b,b.layout="ProgressTrackerLayout"}},function(e){e.O(0,[536,774,888,179],(function(){return n=17740,e(e.s=n);var n}));var n=e.O();_N_E=n}]);